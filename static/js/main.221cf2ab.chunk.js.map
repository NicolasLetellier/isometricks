{"version":3,"sources":["isometricks_logo.svg","editor/gridUtils.js","editor/downloadUtils.js","editor/toolbar/GridSize.js","editor/toolbar/Toolbar.js","editor/frame/TrianglesGrid.js","editor/frame/Frame.js","editor/Editor.js","editor/eventsUtils.js","info/Info.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","TRIANGLE_EDGE_LENGTH","giveTriangleHeight","triangleEdgeLength","Math","sqrt","giveTriangleCoordinates","x","y","orientation","x1","x2","y1","y2","y3","topVertexCoord","sideVertexCoord","bottomVertexCoord","triangleBuilder","giveTriangleOrientation","coordinates","calculateGridDimensions","gridWidthInTriangles","gridHeightInTriangles","width","height","IMAGE_SIZE_FACTOR","GridSize","onDialog","setOnDialog","setGridDimensionsInTriangles","useState","selectedDimensions","setSelectedDimensions","closeDialog","type","disabled","className","onClick","viewBox","d","id","name","htmlFor","Toolbar","activeFace","setActiveFace","backwardInHistory","forwardInHistory","buildAndSaveFile","style","strokeWidth","strokeLinecap","strokeLinejoin","transform","points","TrianglesGrid","presentation","gridDimensionsInTriangles","trianglesMap","triangleClickHandler","trianglesPolygons","triangleMapData","triangleGridCoord","topCoord","sideCoord","bottomCoord","push","key","data-orientation","stroke","fill","Frame","polygonStack","gridDimensions","drawingPolygons","forEach","polygon","index","reduce","acc","value","preserveAspectRatio","START_GRID_DIMENSIONS","Editor","stacksHistory","setStacksHistory","historyNavIndex","setHistoryNavIndex","useEffect","historyLastIndex","length","currentHistoryIndex","map","trianglesMapBuilder","addPolygonIntoStacksHistory","actualisedPolygonStack","previousStack","previousStackCopy","polygonCoordsString","flat","toString","i","splice","concat","actualiseStack","slicedHistory","slice","svgMarkup","stack","polygonsMarkup","polygons","svgBlob","Blob","saveAs","buildAndSave","triangleMapCoord","eventTriangleCoord","upperTriangle","undefined","upperTriangleCoord","lowerTriangle","lowerTriangleCoord","onRightRow","onRightTriangleCoord","onLeftRow","onLeftTriangleCoord","calculateFacePoints","Info","href","App","infoDisplayed","setInfoDisplayed","src","logo","alt","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.221cf2ab.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/isometricks_logo.97a25612.svg\";","\n// WARNING: It is assumed that we will only use the hexagon\n// orientation that is really usefull for isometric drawings:\n// hexagons 'pointy topped'\n// a LOT of calculations are extrapolated based on this assumption\n\n// Here we define this value (1) as a universal basis of the project.\n// This will help to visualize other values like svg grid dimensions\nconst TRIANGLE_EDGE_LENGTH = 1;\n\nfunction giveTriangleHeight(triangleEdgeLength) {\n  return Math.sqrt(3) / 2 * triangleEdgeLength;\n}\n\n// Give orientation of triangle, pointing to left or right\nfunction giveTriangleOrientation(x, y) {\n  // This rule works because we decided to start grid\n  // at 0,0 with a left triangle.\n  // Using % as we won't have negative coordinates.\n  return (x % 2 === y % 2) ? 'left' : 'right';\n}\n\n// Coordinate system:\n// starts at 0, 0 (top left)\n// x (horizontal) increase to the right\n// y (vertical) increase to the bottom\n\n// Coordinates are given ordered, for any given triangle,\n// by increasing y:\n// first, top vertex coordinates\n// second, coordinates of the sided vertex (pointing to left or right)\n// third, bottom vertex coordinates\nfunction giveTriangleCoordinates(x, y, orientation) {\n  // for each triangle, we need to calculate:\n  // two values of x: x1 and x2\n  // and three values of y: y1, y2 and y3\n\n  const x1 = giveTriangleHeight(x * TRIANGLE_EDGE_LENGTH);\n  const x2 = giveTriangleHeight((x + 1) * TRIANGLE_EDGE_LENGTH);\n  const y1 = y * (TRIANGLE_EDGE_LENGTH / 2);\n  const y2 = (y * (TRIANGLE_EDGE_LENGTH / 2)) + (TRIANGLE_EDGE_LENGTH / 2);\n  const y3 = (y * (TRIANGLE_EDGE_LENGTH / 2)) + TRIANGLE_EDGE_LENGTH;\n\n  if (orientation === 'left') {\n    return {\n      topVertexCoord: [x2, y1],\n      sideVertexCoord: [x1, y2],\n      bottomVertexCoord: [x2, y3]\n    };\n  }\n  if (orientation === 'right') {\n    return {\n      topVertexCoord: [x1, y1],\n      sideVertexCoord: [x2, y2],\n      bottomVertexCoord: [x1, y3]\n    };\n  }\n}\n\nfunction triangleBuilder(x, y) {\n  const orientation = giveTriangleOrientation(x, y);\n  let triangle = {\n    orientation,\n    coordinates: giveTriangleCoordinates(x, y, orientation)\n  };\n  return triangle;\n}\n\nfunction trianglesMapBuilder(gridWidthInTriangles, gridHeightInTriangles) {\n  const map = [];\n\n  for (let x = 0; x < gridWidthInTriangles; x++) {\n    map[x] = [];\n    for (let y = 0; y < gridHeightInTriangles; y++) {\n      map[x][y] = triangleBuilder(x, y);\n    }\n  }\n  return map;\n}\n\nfunction calculateGridDimensions(gridWidthInTriangles, gridHeightInTriangles) {\n  const width = gridWidthInTriangles * giveTriangleHeight(TRIANGLE_EDGE_LENGTH);\n  const height = ((gridHeightInTriangles - 1) * TRIANGLE_EDGE_LENGTH / 2) + TRIANGLE_EDGE_LENGTH;\n  return {\n    width,\n    height\n  };\n}\n\nexport { trianglesMapBuilder, calculateGridDimensions };\n","\nimport { saveAs } from 'file-saver';\n\n// factor to multiply grid dimensions to get sensible pixel sizes\nconst IMAGE_SIZE_FACTOR = 30;\n\nfunction buildAndSave(polygonStack, gridDimensions) {\n  function polygons(stack) {\n    let polygonsMarkup = '';\n\n    stack.forEach((polygon) => {\n      const points = polygon.points.reduce((acc, value) => {\n        return (acc + `${value[0]},${value[1]} `);\n      }, '');\n      polygonsMarkup += `\n  <polygon points=\"${points}\" stroke=\"none\" fill=\"${polygon.fill}\" />`;\n    });\n\n    return polygonsMarkup;\n  }\n\n  const svgMarkup = `\n<svg class=\"isometricks-svg\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"${gridDimensions.width * IMAGE_SIZE_FACTOR}px\" height=\"${gridDimensions.height * IMAGE_SIZE_FACTOR}px\" preserveAspectRatio=\"xMinYMin\" viewBox=\"0 0 ${gridDimensions.width} ${gridDimensions.height}\">${polygons(polygonStack)}\n</svg>\n  `;\n\n  const svgBlob = new Blob([svgMarkup], {type: \"image/svg+xml\"});\n\n  saveAs(svgBlob, 'isometricks.svg');\n}\n\nexport { buildAndSave };\n","\nimport React, { useState } from 'react';\n\nimport './GridSize.css';\n\nfunction GridSize({\n  onDialog,\n  setOnDialog,\n  setGridDimensionsInTriangles\n}) {\n  const [selectedDimensions, setSelectedDimensions] = useState(null);\n\n  function applySelection() {\n    if (selectedDimensions !== null) {\n      setGridDimensionsInTriangles(selectedDimensions);\n      setSelectedDimensions(null);\n    }\n    setOnDialog(null);\n  }\n\n  function closeDialog() {\n    if (selectedDimensions !== null) {\n      setSelectedDimensions(null);\n    }\n    setOnDialog(null);\n  }\n\n  function toogleDialog() {\n    if (onDialog === null) {\n      setOnDialog('grid size');\n    } else if (onDialog === 'grid size') {\n      closeDialog();\n    }\n  }\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        disabled={onDialog !== null && onDialog !== 'grid size'} // another dialog is opened\n        className={`grid-size toolbar-btn ${onDialog === 'grid size' && 'active'}`}\n        onClick={() => toogleDialog()}\n      >\n        <svg\n          viewBox=\"0 0 42 47.75\"\n        >\n          <path\n            d=\"m 40,47.75 c 1.104,0 2,-0.896 2,-2 v -24 c 0,-0.53 -0.211,-1.039 -0.586,-1.414 l -8,-8 C 33.039,11.961 32.53,11.75 32,11.75 H 14 c -1.104,0 -2,0.896 -2,2 v 32 c 0,1.104 0.896,2 2,2 z m -3.829,-27 H 32 V 16.579 Z M 16,15.75 h 12 v 7 c 0,1.104 0.896,2 2,2 h 8 v 19 H 16 Z\" />\n          <path\n            d=\"m 38,6 c 0,1.104 0.896,2 2,2 1.104,0 2,-0.896 2,-2 V 2 C 42,0.896 41.104,0 40,0 38.896,0 38,0.896 38,2 H 16 C 16,0.896 15.104,0 14,0 12.896,0 12,0.896 12,2 v 4 c 0,1.104 0.896,2 2,2 1.104,0 2,-0.896 2,-2\"\n          />\n          <path\n            d=\"m 0,45.75 c 0,1.104 0.896,2 2,2 h 4 c 1.104,0 2,-0.896 2,-2 0,-1.104 -0.896,-2 -2,-2 v -28 c 1.104,0 2,-0.896 2,-2 0,-1.104 -0.896,-2 -2,-2 H 2 c -1.104,0 -2,0.896 -2,2 0,1.104 0.896,2 2,2 v 28 c -1.104,0 -2,0.896 -2,2 z\" />\n        </svg>\n      </button>\n      {onDialog === 'grid size' && (\n        <div className=\"grid-size-wrapper\">\n          <div className=\"grid-size-dropdown\">\n            <p>\n              Select a size for a new <strong>empty</strong> grid:\n            </p>\n            <div className=\"radio-component\">\n              <input\n                id=\"mobile-size\"\n                type=\"radio\"\n                name=\"size\"\n                onClick={() => setSelectedDimensions({\n                  width: 15,\n                  height: 35\n                })}\n              />\n              <label htmlFor=\"mobile-size\">\n                for mobile phone (15 x 35)\n              </label>\n            </div>\n            <div className=\"radio-component\">\n              <input\n                id=\"desktop-size\"\n                type=\"radio\"\n                name=\"size\"\n                onClick={() => setSelectedDimensions({\n                  width: 45,\n                  height: 35\n                })}\n              />\n              <label htmlFor=\"desktop-size\">\n                for desktop (45 x 35)\n              </label>\n            </div>\n            <button\n              type=\"button\"\n              className=\"apply-grid-size dialog-btn\"\n              disabled={selectedDimensions === null}\n              onClick={() => applySelection()}\n            >\n              Apply\n            </button>\n            <button\n              type=\"button\"\n              className=\"close-grid-size dialog-btn\"\n              onClick={() => closeDialog()}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default GridSize;\n","\nimport React from 'react';\n\nimport GridSize from './GridSize';\nimport './Toolbar.css';\n\nfunction Toolbar({\n  activeFace,\n  setActiveFace,\n  onDialog,\n  setOnDialog,\n  backwardInHistory,\n  forwardInHistory,\n  setGridDimensionsInTriangles,\n  buildAndSaveFile\n}) {\n  return (\n    <div className=\"Toolbar\">\n      <div className=\"left-buttons\">\n        <GridSize\n          onDialog={onDialog}\n          setOnDialog={setOnDialog}\n          setGridDimensionsInTriangles={setGridDimensionsInTriangles}\n        />\n        <button\n          type=\"button\"\n          disabled={onDialog !== null}\n          className=\"download toolbar-btn\"\n          onClick={() => buildAndSaveFile()}\n        >\n          <svg\n            viewBox=\"0 0 30 36\"\n          >\n            <path\n              d=\"m 28,36 c 1.104,0 2,-0.896 2,-2 V 10 C 30,9.47 29.789,8.961 29.414,8.586 l -8,-8 C 21.039,0.211 20.53,0 20,0 H 2 C 0.896,0 0,0.896 0,2 v 32 c 0,1.104 0.896,2 2,2 z M 24.171,9 H 20 V 4.829 Z M 4,4 h 12 v 7 c 0,1.104 0.896,2 2,2 h 8 V 32 H 4 Z\"\n            />\n            <path\n              d=\"m 15,27.641506 -5.033641,-3.25 m 5.033641,3.25 5.033641,-3.25 M 15,16.95101 v 10.690496\"\n              style={{\n                strokeWidth: '3.25',\n                strokeLinecap: 'round',\n                strokeLinejoin: 'round',\n              }}\n            />\n          </svg>\n        </button>\n        <button\n          type=\"button\"\n          className=\"backward toolbar-btn\"\n          disabled={backwardInHistory === null || onDialog !== null}\n          onClick={backwardInHistory}\n        >\n          <svg\n            viewBox=\"0 0 454.839 454.839\"\n          >\n            <path\n              d=\"M404.908,283.853c0,94.282-76.71,170.986-170.986,170.986h-60.526c-10.03,0-18.158-8.127-18.158-18.157v-6.053c0-10.031,8.127-18.158,18.158-18.158h60.526c70.917,0,128.618-57.701,128.618-128.618c0-70.917-57.701-128.618-128.618-128.618H122.255l76.905,76.905c8.26,8.257,8.26,21.699,0,29.956c-8.015,8.009-21.964,7.997-29.961,0L56.137,149.031c-4.001-4.001-6.206-9.321-6.206-14.981c0-5.656,2.205-10.979,6.206-14.978L169.205,6.002c7.997-8.003,21.958-8.003,29.956,0c8.26,8.255,8.26,21.699,0,29.953l-76.905,76.911h111.666C328.198,112.866,404.908,189.573,404.908,283.853z\"\n            />\n          </svg>\n        </button>\n        <button\n          type=\"button\"\n          className=\"forward toolbar-btn\"\n          disabled={forwardInHistory === null || onDialog !== null}\n          onClick={forwardInHistory}\n        >\n          <svg\n            viewBox=\"0 0 454.839 454.839\"\n          >\n            <g\n              transform=\"rotate(-180 227.41949462890625,227.45840454101562)\"\n            >\n              <path\n                d=\"m404.908004,170.994574c0,-94.332459 -76.709999,-171.07751 -170.985997,-171.07751l-60.525999,0c-10.03,0 -18.158,8.13135 -18.158,18.166717l0,6.05624c0,10.036369 8.127,18.167718 18.158,18.167718l60.525999,0c70.916999,0 128.617998,57.731881 128.617998,128.686835c0,70.954954 -57.700999,128.686835 -128.617998,128.686835l-111.666998,0l76.904999,-76.946159c8.26,-8.261419 8.26,-21.710613 0,-29.972032c-8.015,-8.013286 -21.964,-8.00128 -29.960999,0l-113.061998,113.125512c-4.001,4.003141 -6.206,9.325989 -6.206,14.989018c0,5.659027 2.205,10.984876 6.206,14.986016l113.067998,113.130514c7.997,8.007283 21.958,8.007283 29.955999,0c8.26,-8.259418 8.26,-21.710613 0,-29.969031l-76.904999,-76.952162l111.665998,0c94.275998,0 170.985997,-76.748053 170.985997,-171.078511z\"\n              />\n            </g>\n          </svg>\n        </button>\n        {/* <button\n          type=\"button\"\n          className=\"palette toolbar-btn\"\n          onClick={() => {}}\n        >\n          <svg\n            width=\"639.59314pt\"\n            viewBox=\"-21 -21 640.21837 635.85004\"\n            height=\"635.85004pt\">\n            <path\n              id=\"path2\"\n              d=\"m 243.63859,-16.405955 c 84.14811,-14.809817 169.02669,4.021664 239.01372,53.027116 69.99088,49.004763 116.71925,122.328819 131.5784,206.464269 14.75536,83.54686 -3.48092,167.84218 -51.349,237.35101 -47.87306,69.52557 -120.12783,116.60831 -203.43726,132.57523 -1.16293,0.2209 -2.32922,0.44249 -3.49415,0.65186 l -0.36534,0.0644 c -26.58981,4.6885 -53.73151,-2.43334 -74.52273,-19.56769 -21.1401,-17.42583 -33.4858,-43.24126 -33.87003,-70.83991 -0.0894,-6.58054 -0.80441,-13.22463 -2.12184,-19.75126 -5.37842,-26.67839 -20.75015,-50.05552 -43.28121,-65.83195 -22.52722,-15.77711 -49.75951,-22.22403 -76.66535,-18.15808 -6.58362,0.99428 -13.0723,2.59341 -19.29041,4.76078 -26.054135,9.0762 -54.54544,6.31369 -78.15071,-7.59152 -23.3154099,-13.7461 -39.32809,-36.96215 -43.93851,-63.71646 -0.20024,-1.15861 -0.39117,-2.3313 -0.57998,-3.49192 C -30.32534,265.79365 -10.79435,181.79458 38.16476,113.02947 87.093315,44.293557 160.02169,-1.6620389 243.54184,-16.388896 Z\"\n              style={{strokeWidth: '1'}}\n            />\n            <path\n              id=\"path899\"\n              d=\"M 532.79158,281.65801 A 79.588722,79.588722 0 0 1 430.7817,329.226 79.588722,79.588722 0 0 1 383.21371,227.21611 79.588722,79.588722 0 0 1 485.2236,179.64813 79.588722,79.588722 0 0 1 532.79158,281.65801 Z\"\n              style={{\n                opacity: '1',\n                fill: '#ffffff',\n                fillOpacity: '1'\n              }}\n            />\n            <path\n              id=\"path897\"\n              d=\"M 215.00468,281.65826 A 79.588722,79.588722 0 0 1 112.9948,329.22625 79.588722,79.588722 0 0 1 65.426808,227.21637 79.588722,79.588722 0 0 1 167.43669,179.64839 79.588722,79.588722 0 0 1 215.00468,281.65826 Z\"\n              style={{\n                opacity: '1',\n                fill: '#ffffff',\n                fillOpacity: '1'\n              }}\n            />\n            <path\n              id=\"path829-0-6\"\n              d=\"M 373.66048,123.6484 A 79.588715,79.588715 0 0 1 271.65061,171.21638 79.588715,79.588715 0 0 1 224.08263,69.206513 79.588715,79.588715 0 0 1 326.09249,21.638527 79.588715,79.588715 0 0 1 373.66048,123.6484 Z\"\n              style={{\n                opacity: '1',\n                fill: '#ffffff',\n                fillOpacity: '1'\n              }}\n            />\n          </svg>\n        </button> */}\n      </div>\n      <div className=\"right-buttons\">\n        <button\n          type=\"button\"\n          disabled={onDialog !== null}\n          className={`left toolbar-btn ${activeFace === 'left' && 'active'}`}\n          onClick={() => setActiveFace('left')}\n        >\n          <svg\n            viewBox=\"0 0 0.8660 1.5\"\n          >\n            <polygon\n              points=\"0,0 0.8660,0.5 0.8660,1.5 0,1\"\n            >\n            </polygon>\n          </svg>\n        </button>\n        <button\n          type=\"button\"\n          disabled={onDialog !== null}\n          className={`top toolbar-btn ${activeFace === 'top' && 'active'}`}\n          onClick={() => setActiveFace('top')}\n        >\n          <svg\n            viewBox=\"0 0 1.7321 1\"\n          >\n            <polygon\n              points=\"0.8660,0 1.7321,0.5 0.8660,1 0,0.5\"\n            >\n            </polygon>\n          </svg>\n        </button>\n        <button\n          type=\"button\"\n          disabled={onDialog !== null}\n          className={`right toolbar-btn ${activeFace === 'right' && 'active'}`}\n          onClick={() => setActiveFace('right')}\n        >\n          <svg\n            viewBox=\"0 0 0.8660 1.5\"\n          >\n            <polygon\n              points=\"0.8660,0 0.8660,1 0,1.5 0,0.5\"\n            >\n            </polygon>\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Toolbar;\n","\nimport React from 'react';\nimport './TrianglesGrid.css';\n\nfunction TrianglesGrid({\n  presentation,\n  gridDimensionsInTriangles,\n  trianglesMap,\n  triangleClickHandler\n}) {\n\n  const trianglesPolygons = [];\n  for (let x = 0; x < gridDimensionsInTriangles.width; x++) {\n    for (let y = 0; y < gridDimensionsInTriangles.height; y++) {\n      const triangleMapData = trianglesMap[x][y];\n\n      const orientation = triangleMapData.orientation;\n      const triangleGridCoord = triangleMapData.coordinates;\n      const topCoord = triangleGridCoord.topVertexCoord;\n      const sideCoord = triangleGridCoord.sideVertexCoord;\n      const bottomCoord = triangleGridCoord.bottomVertexCoord;\n\n      trianglesPolygons.push((\n        <polygon\n          key={`${x},${y}`}\n          points={`${topCoord[0]},${topCoord[1]} ${sideCoord[0]},${sideCoord[1]} ${bottomCoord[0]},${bottomCoord[1]}`}\n          data-orientation={orientation}\n          stroke={presentation.stroke}\n          strokeWidth={presentation.strokeWidth}\n          fill={presentation.fill}\n          onClick={triangleClickHandler && (\n            () => triangleClickHandler(\n              {x, y},\n              triangleMapData\n            )\n          )}\n        />\n      ));\n    }\n  }\n\n  // check g element syntax\n  return (\n    <g className=\"TrianglesGrid\">\n      {trianglesPolygons}\n    </g>\n  );\n}\n\nexport default TrianglesGrid;\n","\nimport React from 'react';\nimport TrianglesGrid from './TrianglesGrid';\nimport { calculateGridDimensions } from './../gridUtils';\nimport './Frame.css';\n\n\nfunction Frame({\n  gridDimensionsInTriangles,\n  trianglesMap,\n  triangleClickHandler,\n  polygonStack\n}) {\n  const gridDimensions = calculateGridDimensions(gridDimensionsInTriangles.width, gridDimensionsInTriangles.height);\n\n  // WARNING! we must find a way to not re-render Grid when activeFace,\n  // colors or drawing history change...\n\n  // GOAL is to change the visible grid from triangles grid to points grid,\n  // but conserve these two layers for related events\n\n  const triangleBackgroundPresentation = {\n    stroke: 'silver',\n    strokeWidth: '0.01',\n    fill: 'transparent'\n  };\n\n  const triangleEventsPresentation = {\n    stroke: 'none',\n    fill: 'transparent'\n  };\n\n  const drawingPolygons = [];\n\n  polygonStack.forEach((polygon, index) => {\n    const points = polygon.points.reduce((acc, value) => {\n      return (acc + `${value[0]},${value[1]} `);\n    }, '');\n    drawingPolygons.push((\n      <polygon\n        key={index}\n        points={points}\n        stroke=\"none\"\n        fill={polygon.fill}\n      />\n    ));\n  });\n\n  return (\n    <div className=\"Frame\">\n      <svg\n        className=\"Frame-svg\"\n        viewBox={`0 0 ${gridDimensions.width} ${gridDimensions.height}`}\n        preserveAspectRatio=\"xMidYMin\"\n      >\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width={gridDimensions.width}\n          height={gridDimensions.height}\n          className=\"Frame-background\"\n          stroke=\"none\"\n          fill={'white'}\n        />\n        <TrianglesGrid\n          presentation={triangleBackgroundPresentation}\n          gridDimensionsInTriangles={gridDimensionsInTriangles}\n          trianglesMap={trianglesMap}\n        />\n        {drawingPolygons}\n        <TrianglesGrid\n          presentation={triangleEventsPresentation}\n          gridDimensionsInTriangles={gridDimensionsInTriangles}\n          trianglesMap={trianglesMap}\n          triangleClickHandler={triangleClickHandler}\n        />\n      </svg>\n    </div>\n  );\n}\n\nexport default Frame;\n","\nimport React, { useState, useEffect } from 'react';\n\nimport { trianglesMapBuilder, calculateGridDimensions } from './gridUtils';\nimport { calculateFacePoints } from './eventsUtils';\nimport { buildAndSave } from './downloadUtils';\n\nimport Toolbar from './toolbar/Toolbar';\nimport Frame from './frame/Frame';\nimport './Editor.css';\n\n// default grid size on start,\n// indicated in triangles\nconst START_GRID_DIMENSIONS = {\n  width: 15,\n  height: 35\n};\n\n\nfunction Editor() {\n  const [gridDimensionsInTriangles, setGridDimensionsInTriangles] = useState(START_GRID_DIMENSIONS);\n  const [activeFace, setActiveFace] = useState('left');\n  // onDialog possible values: null, 'grid size', 'color'\n  const [onDialog, setOnDialog] = useState(null);\n  // history array of polygon stacks\n  // polygon stack: array of polygon objects to be draw\n  const [stacksHistory, setStacksHistory] = useState([[]]);\n  // historyNavIndex === null : not currently in history navigation\n  const [historyNavIndex, setHistoryNavIndex] = useState(null);\n\n  // to reset all drawing when new grid size is selected\n  useEffect(() => {\n    setStacksHistory([[]]);\n    setHistoryNavIndex(null);\n  }, [gridDimensionsInTriangles]);\n\n  // length shouldn't be less than 1\n  const historyLastIndex = stacksHistory.length - 1;\n\n  function currentHistoryIndex() {\n    return (historyNavIndex === null) ? historyLastIndex : historyNavIndex;\n  }\n\n  // TO DO : integrate in trianglesMapBuilder the face coordinates for each activeFace\n  // (3 faces posible for each triangle), to avoid computation of calculateFacePoints\n  // on each event\n  const trianglesMap = trianglesMapBuilder(gridDimensionsInTriangles.width, gridDimensionsInTriangles.height);\n\n  const gridDimensions = calculateGridDimensions(gridDimensionsInTriangles.width, gridDimensionsInTriangles.height);\n\n  function backwardInHistory() {\n    if (historyNavIndex === null) {\n      setHistoryNavIndex(historyLastIndex - 1);\n    } else {\n      setHistoryNavIndex(historyNavIndex - 1);\n    }\n  }\n\n  function backwardInHistoryProp() {\n    if (historyLastIndex === 0 || historyNavIndex === 0) {\n      return null;\n    } else {\n      return backwardInHistory;\n    }\n  }\n\n  function forwardInHistory() {\n    if (historyNavIndex === historyLastIndex - 1) {\n      setHistoryNavIndex(null);\n    } else {\n      setHistoryNavIndex(historyNavIndex + 1);\n    }\n  }\n\n  function forwardInHistoryProp() {\n    if (historyNavIndex === null) {\n      return null;\n    } else {\n      return forwardInHistory;\n    }\n  }\n\n  // check if this face is exactly the same as an older one,\n  // and remove it because it would be exactly covered by the new one.\n  // (maybe disable this if in case of use of transparent colors for upper one??)\n  // BE CAREFULL, it won't work in comparing 'shape' coords!\n  // if exactly repeated polygons (same colors, etc...) it will give the impression\n  // when using history nav that nothing was done on this action... but necesary if\n  // some parts of other faces are between the two equals polygons (stack order\n  // has to be corrected)\n  function actualiseStack(previousStack, polygon) {\n    let previousStackCopy = [...previousStack];\n    const polygonCoordsString = polygon.points.flat().toString();\n    for (let i = 0; i < previousStackCopy.length; i++) {\n      const previousPolygonCoordsString = previousStackCopy[i].points.flat().toString();\n      if (previousPolygonCoordsString === polygonCoordsString) {\n        previousStackCopy.splice(i, 1);\n        break; // no possible other repeated faces as it's always checked\n      }\n    }\n    return previousStackCopy.concat(polygon);\n  }\n\n  // truncate forward history to add new stack if currently in history navigation\n  function addPolygonIntoStacksHistory(polygon) {\n    const previousPolygonStack = stacksHistory[currentHistoryIndex()];\n    const actualisedPolygonStack = actualiseStack(previousPolygonStack, polygon);\n    const slicedHistory = stacksHistory.slice(0, currentHistoryIndex() + 1);\n    slicedHistory.push(actualisedPolygonStack);\n    setStacksHistory(slicedHistory);\n    setHistoryNavIndex(null);\n  }\n\n  function triangleClickHandler(triangleMapCoord, triangleMapData) {\n    // activeFace set to null: inactivate any click event\n    // onDialog not null: inactivate any click event\n    if (activeFace === null || onDialog !== null) {\n      return;\n    }\n\n    const points = calculateFacePoints(\n      triangleMapCoord,\n      triangleMapData,\n      trianglesMap,\n      activeFace\n    );\n\n    if (points === undefined) { // invalid event on grid edge\n      return;\n    }\n\n    let fill; // any css color syntax accepted\n    if (activeFace === 'top') {\n      fill = 'lightskyblue';\n    } else if (activeFace === 'right') {\n      fill = 'mediumblue';\n    } else if (activeFace === 'left') {\n      fill = 'royalblue';\n    }\n\n    const polygon = {\n      type: 'face', // other will be 'shape' when implemented?\n      points,\n      fill\n      // stroke and stroke-width: configurables too!\n      // orientation: needed? > probably for changing all\n      // similar faces color at once\n    };\n\n    addPolygonIntoStacksHistory(polygon);\n  }\n\n  function buildAndSaveFile() {\n    const displayedPolygonStack = stacksHistory[currentHistoryIndex()];\n    buildAndSave(displayedPolygonStack, gridDimensions);\n  }\n\n  return (\n    <div className=\"Editor\">\n      <Toolbar\n        activeFace={activeFace}\n        setActiveFace={setActiveFace}\n        onDialog={onDialog}\n        setOnDialog={setOnDialog}\n        backwardInHistory={backwardInHistoryProp()}\n        forwardInHistory={forwardInHistoryProp()}\n        setGridDimensionsInTriangles={setGridDimensionsInTriangles}\n        buildAndSaveFile={buildAndSaveFile}\n      />\n      <Frame\n        gridDimensionsInTriangles={gridDimensionsInTriangles}\n        trianglesMap={trianglesMap}\n        triangleClickHandler={triangleClickHandler}\n        polygonStack={stacksHistory[currentHistoryIndex()]}\n      />\n    </div>\n  );\n}\n\nexport default Editor;\n","\n// return points in an array of coordinates, not svg syntax,\n// as: [[x1,y1], [x2,y2], [x3,y3], [x4,y4]]\n// (to have the same format for future 'shape' points, that COULD need\n// it for history navigation...) > BUT performance considerations (i.e. looping on it twice)?\n// return undefined if complementary triangle for this face is out of grid.\n\n// for every activeFace, points coords are ordened in only one way,\n// to enable 'repeated faces' comparisons\n// BE CAREFULL, this rule won't apply to 'shape' polygons!!\nfunction calculateFacePoints(\n  triangleMapCoord,\n  triangleMapData,\n  trianglesMap,\n  activeFace\n) {\n  const orientation = triangleMapData.orientation;\n  const eventTriangleCoord = triangleMapData.coordinates;\n\n  const points = [];\n  if (activeFace === 'left' || activeFace === 'right') {\n    if (orientation === activeFace) {\n      const upperTriangle = trianglesMap[triangleMapCoord.x][triangleMapCoord.y - 1];\n      if (upperTriangle === undefined) { // complementary triangle for this face is out of grid\n        return;\n      }\n      const upperTriangleCoord = upperTriangle.coordinates;\n      points.push(upperTriangleCoord.topVertexCoord);\n      points.push(eventTriangleCoord.topVertexCoord);\n      points.push(eventTriangleCoord.bottomVertexCoord);\n      points.push(eventTriangleCoord.sideVertexCoord);\n    } else {\n      const lowerTriangle = trianglesMap[triangleMapCoord.x][triangleMapCoord.y + 1];\n      if (lowerTriangle === undefined) { // complementary triangle for this face is out of grid\n        return;\n      }\n      const lowerTriangleCoord = lowerTriangle.coordinates;\n      points.push(eventTriangleCoord.topVertexCoord);\n      points.push(eventTriangleCoord.sideVertexCoord);\n      points.push(lowerTriangleCoord.bottomVertexCoord);\n      points.push(eventTriangleCoord.bottomVertexCoord);\n    }\n  } else if (activeFace === 'top') {\n    if (orientation === 'left') {\n      const onRightRow = trianglesMap[triangleMapCoord.x + 1];\n      if (onRightRow === undefined) { // complementary triangle for this face is out of grid\n        return;\n      }\n      const onRightTriangleCoord = onRightRow[triangleMapCoord.y].coordinates;\n      points.push(eventTriangleCoord.topVertexCoord);\n      points.push(onRightTriangleCoord.sideVertexCoord);\n      points.push(eventTriangleCoord.bottomVertexCoord);\n      points.push(eventTriangleCoord.sideVertexCoord);\n    } else if (orientation === 'right') {\n      const onLeftRow = trianglesMap[triangleMapCoord.x - 1];\n      if (onLeftRow === undefined) { // complementary triangle for this face is out of grid\n        return;\n      }\n      const onLeftTriangleCoord = onLeftRow[triangleMapCoord.y].coordinates;\n      points.push(eventTriangleCoord.topVertexCoord);\n      points.push(eventTriangleCoord.sideVertexCoord);\n      points.push(eventTriangleCoord.bottomVertexCoord);\n      points.push(onLeftTriangleCoord.sideVertexCoord);\n    }\n  }\n  return points;\n}\n\nexport { calculateFacePoints };\n","\nimport React from 'react';\nimport './Info.css';\n\nfunction Info() {\n  return(\n    <div className=\"info-page\">\n      <h2>\n        What is it?\n      </h2>\n      <p>\n        isometricks.com is meant to be an easy-to-use digital counterpart of isometric paper, with the features of an editor, to be used directly in the browser (use it on mobile, tablet or desktop, with any OS).\n      </p>\n      <h2>\n        And what for?\n      </h2>\n      <p>\n        Isometric projections are an easy way to represent 3D shapes on a 2D image. With this editor, you can draw shapes based on basic isometric tiles (or \"faces\"). It can be used for quick prototyping of isometric designs, such as logos for example. Or just have fun with it, experimenting and drawing isometric shapes, illustrations or illusions!\n      </p>\n      <h2>\n        How to use it?\n      </h2>\n      <p>\n        The easiest isometric shape is a cube, you draw it with three faces: a left face, an upper face, and a right face. Just select the face you want to draw in the editor's toolbar, and click on the grid where you want to draw it. That's it!\n      </p>\n      <p>\n        Current features are (in the order they appear in the toolbar):\n      </p>\n      <ul>\n        <li>\n          grid size selector\n        </li>\n        <li>\n          download the current illustration as SVG file\n        </li>\n        <li>\n          history backward and forward buttons\n        </li>\n        <li>\n          face selector buttons\n        </li>\n      </ul>\n      <p>\n        If you like this tool, please promote it!\n        <em className=\"hashtag\">\n          #isometricks\n        </em>\n      </p>\n      <h2>\n        Free to use, open source and open to collaboration\n      </h2>\n      <p>\n        This editor is free to use, doesn't require registration, and doesn't use any cookie (absolutely no data is stored).\n      </p>\n      <p>\n        The code of this editor is open source and open to collaboration on Github. Feel free to <a href=\"https://github.com/NicolasLetellier/isometricks\">have a look</a> and see how it works under the hood!\n      </p>\n    </div>\n  );\n}\n\nexport default Info;\n","\nimport React, { useState } from 'react';\nimport Editor from './editor/Editor';\nimport Info from './info/Info';\nimport logo from './isometricks_logo.svg';\nimport './App.css';\n\nfunction App() {\n  const [infoDisplayed, setInfoDisplayed] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <header className={`App-header ${infoDisplayed && 'info-header'}`}>\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        {!infoDisplayed && (\n          <button\n            type=\"button\"\n            className=\"info-btn\"\n            onClick={() => setInfoDisplayed((infoDisplayed) => (!infoDisplayed))}\n          >\n            <svg\n              viewBox=\"0 0 192.01154 192.01204\"\n            >\n              <g\n                transform=\"translate(-8.9942336,-52.493976)\"\n                id=\"layer1\"\n              >\n                <path\n                  d=\"M 104.99974,52.493976 A 96.00595,96.00595 0 0 0 8.9942336,148.5 96.00595,96.00595 0 0 0 104.99974,244.50602 96.00595,96.00595 0 0 0 201.00577,148.5 96.00595,96.00595 0 0 0 104.99974,52.493976 Z m 0,16.253272 a 79.752975,79.752975 0 0 1 7.96231,0.398425 79.752975,79.752975 0 0 1 7.8822,1.191141 79.752975,79.752975 0 0 1 7.72408,1.97249 79.752975,79.752975 0 0 1 7.48895,2.733167 79.752975,79.752975 0 0 1 7.17837,3.467489 79.752975,79.752975 0 0 1 6.79597,4.167187 79.752975,79.752975 0 0 1 6.34638,4.824511 79.752975,79.752975 0 0 1 5.83324,5.433777 79.752975,79.752975 0 0 1 5.26117,5.989298 79.752975,79.752975 0 0 1 4.63745,6.484357 79.752975,79.752975 0 0 1 3.96668,6.91534 79.752975,79.752975 0 0 1 3.25613,7.27656 79.752975,79.752975 0 0 1 2.51406,7.56543 79.752975,79.752975 0 0 1 1.74563,7.77833 79.752975,79.752975 0 0 1 0.96067,7.91373 79.752975,79.752975 0 0 1 0.19998,5.64152 79.752975,79.752975 0 0 1 -0.39842,7.96178 79.752975,79.752975 0 0 1 -1.19166,7.88273 79.752975,79.752975 0 0 1 -1.97197,7.72407 79.752975,79.752975 0 0 1 -2.73369,7.48895 79.752975,79.752975 0 0 1 -3.46749,7.17786 79.752975,79.752975 0 0 1 -4.16667,6.79648 79.752975,79.752975 0 0 1 -4.82451,6.34639 79.752975,79.752975 0 0 1 -5.43429,5.83323 79.752975,79.752975 0 0 1 -5.9893,5.26118 79.752975,79.752975 0 0 1 -6.48436,4.63692 79.752975,79.752975 0 0 1 -6.91482,3.96669 79.752975,79.752975 0 0 1 -7.27656,3.25665 79.752975,79.752975 0 0 1 -7.56543,2.51354 79.752975,79.752975 0 0 1 -7.77834,1.74614 79.752975,79.752975 0 0 1 -7.91424,0.96067 79.752975,79.752975 0 0 1 -5.64152,0.19947 79.752975,79.752975 0 0 1 -7.961787,-0.39842 79.752975,79.752975 0 0 1 -7.882723,-1.19114 79.752975,79.752975 0 0 1 -7.724076,-1.97249 79.752975,79.752975 0 0 1 -7.488431,-2.73317 79.752975,79.752975 0 0 1 -7.178373,-3.46749 79.752975,79.752975 0 0 1 -6.796484,-4.16719 79.752975,79.752975 0 0 1 -6.346384,-4.82451 79.752975,79.752975 0 0 1 -5.832718,-5.43378 79.752975,79.752975 0 0 1 -5.261695,-5.98929 79.752975,79.752975 0 0 1 -4.636926,-6.48436 79.752975,79.752975 0 0 1 -3.966683,-6.91534 79.752975,79.752975 0 0 1 -3.256648,-7.27656 79.752975,79.752975 0 0 1 -2.513541,-7.56491 79.752975,79.752975 0 0 1 -1.74563,-7.77886 79.752975,79.752975 0 0 1 -0.960665,-7.91373 79.752975,79.752975 0 0 1 -0.199988,-5.64151 79.752975,79.752975 0 0 1 0.398425,-7.96179 79.752975,79.752975 0 0 1 1.191143,-7.88272 79.752975,79.752975 0 0 1 1.97249,-7.72408 79.752975,79.752975 0 0 1 2.733683,-7.48843 79.752975,79.752975 0 0 1 3.467488,-7.17837 79.752975,79.752975 0 0 1 4.166669,-6.79649 79.752975,79.752975 0 0 1 4.824513,-6.346377 79.752975,79.752975 0 0 1 5.434293,-5.833236 79.752975,79.752975 0 0 1 5.988783,-5.261176 79.752975,79.752975 0 0 1 6.484874,-4.636927 79.752975,79.752975 0 0 1 6.914824,-3.966683 79.752975,79.752975 0 0 1 7.276558,-3.256648 79.752975,79.752975 0 0 1 7.565429,-2.513541 79.752975,79.752975 0 0 1 7.778338,-1.746147 79.752975,79.752975 0 0 1 7.913727,-0.960665 79.752975,79.752975 0 0 1 5.641515,-0.199472 z\"\n                />\n                <path\n                  d=\"m 90.264317,105.80131 q 0,-6.033504 4.022339,-10.133196 4.099692,-4.099693 10.752024,-4.099693 6.65233,0 10.67467,4.099693 4.02234,4.099692 4.02234,10.133196 0,6.03351 -4.02234,10.21056 -4.02234,4.09969 -10.67467,4.09969 -6.652332,0 -10.752024,-4.09969 -4.022339,-4.17705 -4.022339,-10.21056 z m 28.233723,98.23791 q -1.77911,0.30941 -5.18262,0.85088 -3.40352,0.54147 -6.88439,0.54147 -3.48087,0 -6.26557,-0.46412 -2.784697,-0.46412 -4.718514,-1.85646 -1.856464,-1.4697 -2.862049,-3.86764 -1.005585,-2.47528 -1.005585,-6.42027 v -64.51214 q 1.779112,-0.30941 5.105277,-0.85087 3.403521,-0.54147 6.884391,-0.54147 3.48087,0 6.26556,0.46411 2.7847,0.46412 4.64117,1.93382 1.93381,1.39235 2.9394,3.86763 1.08293,2.39794 1.08293,6.34292 z\"\n                />\n              </g>\n            </svg>\n          </button>\n        )}\n        {infoDisplayed && (\n          <button\n            type=\"button\"\n            className=\"back-to-editor-btn\"\n            onClick={() => setInfoDisplayed((infoDisplayed) => (!infoDisplayed))}\n          >\n            Back to editor\n          </button>\n        )}\n      </header>\n      {!infoDisplayed && (\n        <Editor />\n      )}\n      {infoDisplayed && (\n        <Info />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}